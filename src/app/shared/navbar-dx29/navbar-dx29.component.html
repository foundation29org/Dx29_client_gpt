<!-- Navbar (Header) Starts -->
<nav class="navbar navbar-expand-lg navbar-light bg-faded damemarger custom-navbar">
  <div class="container-fluid">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" (click)="toggleMenu()">
          <span class="navbar-toggler-icon"></span>
      </button>
      <div class="d-none d-lg-block">
          <span class="navbar-header-logos">
              <img *ngIf="isHomePage" class="logo-header pointer" [src]="headerLogo" alt="logo" (click)="lauchEvent('Logo');goBackEvent();"/>
              <img *ngIf="!isHomePage" class="logo-header pointer" [src]="headerLogo" alt="logo" (click)="navigateWithScroll('/.',  'Logo')" style="cursor: pointer;"/>
          </span>
      </div>
      <div class="d-block">
        <div class="d-sm-block d-lg-none pointer">
          <img *ngIf="isHomePage" class="mt-1 logo-header pointer" [src]="headerLogo" alt="logo" (click)="lauchEvent('Logo');goBackEvent();"/>
          <img *ngIf="!isHomePage" class="mt-1 logo-header pointer" [src]="headerLogo" alt="logo" (click)="navigateWithScroll('/.',  'Logo')" style="cursor: pointer;"/>
      </div>
        <div [class.collapse]="!isMenuExpanded" [class.show]="isMenuExpanded" class="navbar-collapse" id="navbarSupportedContent">
          <button *ngIf="isMenuExpanded" class="close-menu-btn d-lg-none" (click)="toggleMenu()">Ã—</button>
          <ul class="navbar-nav m-r-0 menu-items">
              <li class="nav-item me-2">
                  <a class="nav-link" [ngClass]="(!isHomePage)?'nav-inactive':'nav-active'" href="javascript:void(0)" (click)="navigateWithScroll('/.',  'Page - Home')">
                      <span>{{ 'navbar.TAB_1' | translate }}</span>
                  </a>
              </li>
              <li class="nav-item me-2">
                  <a class="nav-link" [ngClass]="(!isAboutPage)?'nav-inactive':'nav-active'" href="javascript:void(0)" (click)="navigateWithScroll('/aboutus', 'Page - About us')">
                      <span>{{ 'navbar.TAB_2' | translate }}</span>
                  </a>
              </li>
              <li class="nav-item me-2">
                  <a class="nav-link" [ngClass]="(!isQuienesSomosPage)?'nav-inactive':'nav-active'" href="javascript:void(0)" (click)="navigateWithScroll('/quienes-somos', 'Page - Quienes somos')">   
                      <span>{{ 'navbar.TAB_3' | translate }}</span>
                  </a>
              </li>
              <li class="nav-item me-2">
                  <a class="nav-link" [ngClass]="(!isTransparenciaPage)?'nav-inactive':'nav-active'" href="javascript:void(0)" (click)="navigateWithScroll('/transparencia', 'Page - Transparencia')">  
                      <span>{{ 'navbar.TAB_4' | translate }}</span>
                  </a>
              </li>
              <li class="nav-item me-2">
                  <a class="nav-link" [ngClass]="(!isFaqPage)?'nav-inactive':'nav-active'" href="javascript:void(0)" (click)="navigateWithScroll('/faq', 'Page - FAQ')">
                      <span>{{ 'navbar.TAB_5' | translate }}</span>
                  </a>
              </li>
              <!--privacy-policy-->
              <li class="nav-item me-2">
                  <a class="nav-link" [ngClass]="(!isPrivacyPolicyPage)?'nav-inactive':'nav-active'" href="javascript:void(0)" (click)="navigateWithScroll('/privacy-policy', 'Page - Privacy policy')">
                      <span>{{ 'navbar.TAB_6' | translate }}</span>
                  </a>
              </li>
              <!--privacy-policy-->
              <li class="nav-item me-2">
                  <a class="nav-link" [ngClass]="(!isReportsPage)?'nav-inactive':'nav-active'" href="javascript:void(0)" (click)="navigateWithScroll('/reports', 'Page - Usage statistics')">
                      <span>{{ 'navbar.TAB_7' | translate }}</span>
                  </a>
              </li>
              <li class="nav-item me-2 donate-link" ngbDropdown display="dynamic" placement="bottom-left">
                  <a class="nav-link btn btn-info round white mb-0 btn-sm donate-a dropdown-toggle" 
                     id="donationNavDropdown" 
                     ngbDropdownToggle 
                     role="button"
                     (click)="lauchEvent('Page - Donate')">       
                      <span>{{ 'navbar.DONATE_BTN' | translate }} <em class="ms-1 fa fa-heart"></em></span>
                  </a>
                  <div class="dropdown-menu" ngbDropdownMenu aria-labelledby="donationNavDropdown">
                      <a class="dropdown-item" href="https://foundation29.org/donate" target="_blank">
                          <i class="fas fa-euro-sign me-2"></i>{{ 'navbar.DONATE_DROPDOWN_1' | translate }}
                      </a>
                      <a class="dropdown-item" href="javascript:void(0)" (click)="openClinicalDataModal()">
                          <i class="fas fa-file-medical me-2"></i>{{ 'navbar.DONATE_DROPDOWN_2' | translate }}
                      </a>
                      <a class="dropdown-item" href="javascript:void(0)" (click)="openDatasetsModal()">
                          <i class="fas fa-database me-2"></i>{{ 'navbar.DONATE_DROPDOWN_3' | translate }}
                      </a>
                  </div>
              </li>
          </ul>
        </div>
      </div>
      
      <div class="navbar-container ps-0">
          <div id="navbarSupportedContent2">
              <ul class="navbar-nav m-r-0">
                  <li class="nav-item me-2" ngbDropdown display="dynamic" placement="bottom-right">
                      <a class="position-relative colorlink" id="dropdownLang" ngbDropdownToggle role="button">
                          <u>{{currentLang}}</u>
                      </a>
                      <div ngbDropdownMenu aria-labelledby="dropdownLang" class="dropdownLang">
                          <a *ngFor="let lang of langs" class="dropdown-item py-1 lang" href="javascript:;" (click)="ChangeLanguage(lang.code)">
                              <span>{{lang.name}}</span>
                          </a>
                      </div>
                  </li>
              </ul>
          </div>
      </div>
  </div>
</nav>
<!-- Navbar (Header) Ends -->

<!-- Clinical Data Modal -->
<ng-template #clinicalDataModal let-c="close" let-d="dismiss">    
  <div class="unified-modal">
  <div class="modal-header">
    <h4 class="modal-title">{{ 'forms.NAV_CLINICAL_TITLE' | translate }}</h4>
  </div>
  <div class="modal-body">
    <p class="mb-3">{{ 'forms.NAV_CLINICAL_DESCRIPTION' | translate }}</p>
    <p class="text-muted mb-4">{{ 'forms.NAV_CLINICAL_SUBTITLE' | translate }}</p>
    
    <form [formGroup]="clinicalDataForm" (ngSubmit)="submitClinicalDataForm()" class="unified-form">
      <div class="mb-3">
        <label for="clinicalName" class="form-label">{{ 'forms.NAME_LABEL' | translate }} *</label>
        <input type="text" 
               class="form-control" 
               id="clinicalName" 
               formControlName="name"
               placeholder="{{ 'forms.NAME_PLACEHOLDER' | translate }}">
        <div class="text-danger small mt-1" *ngIf="clinicalDataForm.get('name')?.invalid && clinicalDataForm.get('name')?.touched">  
          {{ 'forms.FIELD_REQUIRED' | translate }}
        </div>
      </div>
      
      <div class="mb-3">
        <label for="clinicalEmail" class="form-label">{{ 'forms.EMAIL_LABEL' | translate }} *</label>
        <input type="email" 
               class="form-control" 
               id="clinicalEmail" 
               formControlName="email"
               placeholder="{{ 'forms.EMAIL_PLACEHOLDER' | translate }}">
        <div class="text-danger small mt-1" *ngIf="clinicalDataForm.get('email')?.invalid && clinicalDataForm.get('email')?.touched">
          {{ 'forms.FIELD_REQUIRED' | translate }}
        </div>
      </div>
      
      <div class="mb-3">
        <label for="clinicalMessage" class="form-label">{{ 'forms.MESSAGE_LABEL' | translate }} *</label>
        <textarea class="form-control" 
                  id="clinicalMessage" 
                  rows="4" 
                  formControlName="message"
                  placeholder="{{ 'forms.NAV_CLINICAL_MESSAGE_PLACEHOLDER' | translate }}"></textarea>
        <div class="text-danger small mt-1" *ngIf="clinicalDataForm.get('message')?.invalid && clinicalDataForm.get('message')?.touched">
          {{ 'forms.FIELD_REQUIRED' | translate }}
        </div>
      </div>
      
      <div class="checkboxes-container">
        <div class="checkbox-item">
          <mat-checkbox formControlName="subscribe">
            {{ 'forms.NAV_CLINICAL_SUBSCRIBE_CHECK' | translate }}
          </mat-checkbox>
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="c('Close click')">{{ 'generics.Cancel' | translate }}</button>
    <button type="button" 
            class="btn btn-primary" 
            [disabled]="clinicalDataForm.invalid"
            (click)="submitClinicalDataForm()">
      {{ 'forms.SUBMIT_BTN' | translate }}
    </button>
  </div>
  </div>
</ng-template>

<!-- Datasets Modal -->
<ng-template #datasetsModal let-c="close" let-d="dismiss">        
  <div class="unified-modal">
  <div class="modal-header">
    <h4 class="modal-title">{{ 'forms.NAV_DATASETS_TITLE' | translate }}</h4>
  </div>
  <div class="modal-body">
    <p class="mb-3">{{ 'forms.NAV_DATASETS_DESCRIPTION' | translate }}</p>
    <p class="text-muted mb-4">{{ 'forms.NAV_DATASETS_SUBTITLE' | translate }}</p>
    
    <form [formGroup]="datasetsForm" (ngSubmit)="submitDatasetsForm()" class="unified-form">
      <div class="mb-3">
        <label for="datasetsName" class="form-label">{{ 'forms.NAME_LABEL' | translate }} *</label>
        <input type="text" 
               class="form-control" 
               id="datasetsName" 
               formControlName="name"
               placeholder="{{ 'forms.NAME_PLACEHOLDER' | translate }}">
        <div class="text-danger small mt-1" *ngIf="datasetsForm.get('name')?.invalid && datasetsForm.get('name')?.touched">
          {{ 'forms.FIELD_REQUIRED' | translate }}
        </div>
      </div>
      
      <div class="mb-3">
        <label for="datasetsEmail" class="form-label">{{ 'forms.EMAIL_LABEL' | translate }} *</label>
        <input type="email" 
               class="form-control" 
               id="datasetsEmail" 
               formControlName="email"
               placeholder="{{ 'forms.EMAIL_PLACEHOLDER' | translate }}">
        <div class="text-danger small mt-1" *ngIf="datasetsForm.get('email')?.invalid && datasetsForm.get('email')?.touched">        
          {{ 'forms.FIELD_REQUIRED' | translate }}
        </div>
      </div>
      
      <div class="mb-3">
        <label for="datasetsMessage" class="form-label">{{ 'forms.MESSAGE_LABEL' | translate }} *</label>
        <textarea class="form-control" 
                  id="datasetsMessage" 
                  rows="4" 
                  formControlName="message"
                  placeholder="{{ 'forms.NAV_DATASETS_MESSAGE_PLACEHOLDER' | translate }}"></textarea>
        <div class="text-danger small mt-1" *ngIf="datasetsForm.get('message')?.invalid && datasetsForm.get('message')?.touched">    
          {{ 'forms.FIELD_REQUIRED' | translate }}
        </div>
      </div>
      
      <div class="checkboxes-container">
        <div class="checkbox-item">
          <mat-checkbox formControlName="subscribe">
            {{ 'forms.NAV_DATASETS_SUBSCRIBE_CHECK' | translate }}
          </mat-checkbox>
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="c('Close click')">{{ 'generics.Cancel' | translate }}</button>
    <button type="button" 
            class="btn btn-primary" 
            [disabled]="datasetsForm.invalid"
            (click)="submitDatasetsForm()">
      {{ 'forms.SUBMIT_BTN' | translate }}
    </button>
  </div>
  </div>
</ng-template>
